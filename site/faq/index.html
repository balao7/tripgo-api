<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<meta name="author" content="SkedGo Pty Ltd">
		
		<link rel="apple-touch-icon" sizes="57x57" href="../img/favicon/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="../img/favicon/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="../img/favicon/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="../img/favicon/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="../img/favicon/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="../img/favicon/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="../img/favicon/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="../img/favicon/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="../img/favicon/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="../img/favicon/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="../img/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="../img/favicon/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../img/favicon/favicon-16x16.png">
		<link rel="manifest" href="../img/favicon/manifest.json">
		<meta name="msapplication-TileColor" content="#154c7b">
		<meta name="msapplication-TileImage" content="../img/favicon/ms-icon-144x144.png">
		<meta name="theme-color" content="#154c7b">
		<title>F.A.Q. - TripGo Developer</title>
		<link rel="stylesheet" href="../css/main.css">
		<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
		<![endif]-->
	        <script>
	            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	            ga('create', 'UA-33335816-3', 'developer.tripgo.com');
	            ga('send', 'pageview');
	        </script> 
	</head>
	<body >
		<header class="navbar">
	<div class="search-container">
		<a class="search" href="#"></a>
		<div class="search-form" id="mkdocs_search_modal" tabindex="-1" raria-labelledby="Search Modal" aria-hidden="true">
    <form role="form" class="container">
        <div class="search-icon"></div>
        <input type="text" class="search-field" placeholder="Type keyword..." id="mkdocs-search-query">
    </form>
    <div class="results-list">
    	<div id="mkdocs-search-results" class="container"></div>
    </div>
</div>
	</div>
	<div class="container-fluid">
		<a class="logo" href="..">
			<img src="../img/tripgo-api-logo-white.svg" alt="TripGo API Logo White" height="32" width="140">
		</a>

		<div class="divider"></div>
		<a class="menu-toggle" type="button" href="#" aria-hidden="true">
			<div class="bar-container">
				<span class="bar-1"></span>
				<span class="bar-2"></span>
				<span class="bar-3"></span>
			</div>
		</a>
		<div class="menu" aria-hidden="false">
			
				<ul>
					
						
							<li class="">
								<a href="..">Getting Started</a>
							</li>
						
					
						
							<li class="current">
								<a href="./">F.A.Q.</a>
							</li>
						
					
						
							<li class="">
								<a href="../extensions/">Extensions</a>
							</li>
						
					
						
							<li>
								<a href="#" class="dropdown">Enterprise</a>
								<ul class="submenu">
									
										<li class="">
											<a href="../enterprise/push/">Push Notifications</a>
										</li>
									
										<li class="">
											<a href="../enterprise/bookings-api/">Bookings (API)</a>
										</li>
									
										<li class="">
											<a href="../enterprise/bookings-ios/">Bookings (iOS)</a>
										</li>
									
								</ul>
							</li>
						
					
				</ul>
			
		</div>
		
	</div>
	
</header>
		
		<div class="container -layout-3-9">
                <div class="col" role="complementary"><div class="sidebar hidden-print affix" role="complementary" id="sidebar">
	<div class="indicator"></div>
    <ul class="nav sidenav">
        <li class="main "><a href="#general" class="active">General</a></li>
            <li><a href="#languages" class="">Languages</a></li>
            <li><a href="#regions" class="">Regions</a></li>
        <li class="main "><a href="#routing" class="">Routing</a></li>
            <li><a href="#mode-identifiers" class="">Mode Identifiers</a></li>
            <li><a href="#single-modal-vs-multi-modal-routing" class="">Single-modal vs. multi-modal routing</a></li>
            <li><a href="#trips-groups-frequencies-and-templates" class="">Trips, groups, frequencies and templates</a></li>
            <li><a href="#placeholders-in-segment-templates" class="">Placeholders in segment templates</a></li>
        <li class="main "><a href="#locations" class="">Locations</a></li>
            <li><a href="#locations-cell-ids-and-hash-codes" class="">Locations, cell IDs and hash codes</a></li>
    </ul>
</div></div>
                <div class="col content" role="main">

<h1 id="general">General</h1>
<h2 id="languages">Languages</h2>
<blockquote>
<p>Which languages does the API support?</p>
</blockquote>
<p>Most text that's returned in the results and meant to be displayed to users has been localised to several languages - Chinese (simplified and traditional), Danish, Dutch, English, German, Italian, Finnish, French, Korean, Portuguese, Spanish.</p>
<p>The translations are done <a href="https://crowdin.com/project/tripgo">in the open on Crowdin</a> and everyone can contribute, including adding new languages.</p>
<p>One note of causion: Some text, such as line names and status alerts, is provided by transport providers and only available in the languages provided by them.</p>
<hr />
<h2 id="regions">Regions</h2>
<blockquote>
<p>What are regions?</p>
</blockquote>
<p>Our API splits the world into several pieces, which we call regions. Several endpoints require you to pass along a region code, e.g., because identifiers might be duplicated around the world.</p>
<p>You can get a list of regions by quering <a href="https://skedgo.github.io/tripgo-api/#tag/Configuration%2Fpaths%2F~1regions.json%2Fpost"><code>regions.json</code></a>:</p>
<pre><code>curl 'https://api.tripgo.com/v1/regions.json' -H 'Accept: application/json' --compressed -H &quot;X-TripGo-Key: $tripgoKey&quot; -d '{&quot;v&quot;:2}'
</code></pre>

<p>Then extract the polylines from there and match your coordinates to a region. This endpoint also tells you which modes are supported by routing for a given region. </p>
<blockquote>
<p>I noticed URLs in those regions, how can/should I use those?</p>
</blockquote>
<p>Most developer should not need to worry about these and can just use the <code>api.tripgo.com</code> domain. However, performance critical application can use this to reduce lag and directly hit the routing servers.</p>
<p><em>For advanced users</em>: This exposes to you that our API is covered by multiple servers - though not every server covers ever region. You can use the URLs to directly query servers covering a certain region â€“ which can be beneficial to reduce lag and is recommended for server-to-server communication. However, be aware that you should add failover from one server to another yourself then, as individual servers can go down unannounced for maintenance. You should only cache this information short term as those URLs can change without notice.</p>
<hr />
<h1 id="routing">Routing</h1>
<h2 id="mode-identifiers">Mode Identifiers</h2>
<blockquote>
<p>What are all these peculiar looking strings such as <code>pt_pub</code>?</p>
</blockquote>
<h3 id="syntax">Syntax</h3>
<p>The syntax of the mode string is like this:</p>
<p><code>&lt;group&gt;_&lt;mode that makes sense to the user&gt;[_&lt;provider or fine-grained mode&gt;]</code></p>
<h3 id="list-of-groups">List of groups</h3>
<ul>
<li><code>pt_</code> is for transit which runs on schedules</li>
<li><code>ps_</code> is for taxi-like on-demand services</li>
<li><code>me_</code> is for vehicles you drive yourself</li>
<li><code>cy_</code> is for cycling</li>
<li><code>wa_</code> is for walking</li>
<li><code>in_</code> is for intercity long distance transport</li>
</ul>
<h4 id="pt_"><code>pt_</code></h4>
<ul>
<li><code>pt_pub</code> is "public transit" that is accessible to public</li>
<li><code>pt_pub_bus</code></li>
<li><code>pt_pub_train</code></li>
<li><code>pt_pub_ferry</code></li>
<li><code>pt_pub_tram</code></li>
<li><code>pt_pub_subway</code></li>
<li><code>pt_pub_monorail</code></li>
<li><code>pt_pub_cablecar</code></li>
<li><code>pt_pub_funicular</code></li>
<li><code>pt_pub_gondola</code></li>
<li><code>pt_ltd_SCHOOLBUS</code> is public transit of limited access (school buses)</li>
</ul>
<h4 id="ps_"><code>ps_</code></h4>
<ul>
<li><code>ps_tax</code> is for taxis</li>
<li><code>ps_tnc</code> is for uber and alike (TNC is California's official code for them)</li>
<li><code>ps_tnc_lyft</code></li>
<li><code>ps_tnc_sidecar</code></li>
<li><code>ps_tnc_uber</code></li>
<li><code>ps_shu</code> is for (airport) shuttles</li>
</ul>
<h4 id="me_"><code>me_</code></h4>
<ul>
<li><code>me_car</code> is for your own car</li>
<li><code>me_car-s</code> is for car sharing (like ZipCar or GoGet)</li>
<li><code>me_car-r</code> is for car rental (like Budget)</li>
<li><code>me_car-p</code> is for car pooling (like BlaBlaCar)</li>
<li><code>me_mot</code> is for your own motorbike</li>
</ul>
<hr />
<h2 id="single-modal-vs-multi-modal-routing">Single-modal vs. multi-modal routing</h2>
<blockquote>
<p>How do I get these sweet results which combine taxis or other private transport modes with public transport?</p>
</blockquote>
<p>You need to specify multiple modes in the <code>routing.json</code> requests, e.g., by using <code>modes=pt_pub&amp;modes=ps_tax</code>. You can specify a long list of modes as the API will then return suitable combinations for any of those.</p>
<blockquote>
<p>What if I want to get both public-transport-only results and mixed results?</p>
</blockquote>
<p>In this case you need to currently send off multiple requests, e.g., if you want public transport, taxi, and combinations of the two, you need to send three requests: one with <code>modes=pt_pub</code>, one with <code>modes=ps_tax</code>, and one with <code>modes=pt_pub&amp;modes=ps_tax</code>.</p>
<p><strong>The request with multiple modes will only return inter-modal results, no results for individual modes.</strong> A few things to note about this:</p>
<ol>
<li>This is done as inter-modal results can be slower to calculate due to the many combinations to crunch and them being likely to depend on external API calls, slowing things down further.</li>
<li>By having the inter-modal request not returning single-modal results, you don't need to do any duplicate detection between the results of the different calls as they are mutually exclusive.</li>
<li>You'll only get such inter-modal combinations where that combination is better in some way than using any individual mode by itself. It is therefore quite common that inter-modal requests result in an empty response.</li>
</ol>
<hr />
<h2 id="trips-groups-frequencies-and-templates">Trips, groups, frequencies and templates</h2>
<blockquote>
<p>What is the logic behind trip groups and what does the frequency property mean?</p>
</blockquote>
<p>Each group is one way of getting from A to B. Each trip in a group is taking the same modes, and similar stops and tickets. They can take different services and different platforms, but overall they are all the same way of getting where you want to go, just at different times.</p>
<p>Frequency is related to this. It's the average frequency for how often such trips in a group run. It's an indication of how long you'd need to wait if you missed a trip in that group.</p>
<p>In our UI, for showing alternative ways of getting from A to B, we display a list of trip groups and for each trip group we display a "representative" trip, which is the one that fits the query the best. That's the trip in the trip group with the lowest <code>weightedScore</code>.</p>
<blockquote>
<p>Why are segments split into references and templates?</p>
</blockquote>
<p>This is related to trip groups: Trips in those groups often vary in just a few components but often take the same way or share other properties. The shared properties live in the templates while the properties that typically vary between trips live in the references. This can significantly cut down the size of the results and, thus, also the parsing speed on the client.</p>
<hr />
<h2 id="placeholders-in-segment-templates">Placeholders in segment templates</h2>
<blockquote>
<p>What are all the possible values for placeholders and how should they get interpreted?</p>
</blockquote>
<p>In order to use segment templates for multiple similar segments, the <code>notes</code> and <code>action</code> fields of a segment templates use placeholders, which should be filled it at run-time with the information from the segment template, and potentially updated with real-time data.</p>
<ul>
<li><code>&lt;NUMBER&gt;</code>: Placeholder for the number of short name of the transit service, e.g., <code>segment.serviceNumber</code>.</li>
<li><code>&lt;LINE_NAME&gt;</code>: Placeholder for the long name of the transit service, e.g., <code>segment.serviceName</code>.</li>
<li><code>&lt;DIRECTION&gt;</code>: Placeholder for the direction of the transit service, e.g., <code>segment.serviceDirection</code>.</li>
<li><code>&lt;LOCATIONS&gt;</code>: Placeholder for the start and end location of the segment, e.g., <code>segment.start -&gt; segment.end</code>.</li>
<li><code>&lt;PLATFORM&gt;</code>: Placeholder for the embarkation platform of the transit service, e.g., <code>segment.platform</code>.</li>
<li><code>&lt;STOPS&gt;</code>: Placeholder for the number of stops that a transit service takes from the start to the end of the segment (including the disembarkation, but excluding the embarkation stop), e.g., <code>segment.stops</code>.</li>
<li><code>&lt;TIME&gt;</code>*: Placeholder for the departure time of the segment, e.g., <code>segment.startTime</code> formatted as a time. Note that this can directly follow a <code>&lt;NUMBER&gt;</code> template, so you might have to add spacing. </li>
<li><code>&lt;DURATION&gt;</code>*: Placeholder for the total duration of the segment, e.g., <code>segment.endTime - segment.startTime</code> formatted as a duration string.</li>
<li><code>&lt;TRAFFIC&gt;</code>: (Badly named) placeholder for the total duration <em>without</em> traffic of the segment, e.g., <code>segment.durationWithoutTraffic</code> formatted as a duration string.</li>
</ul>
<p><code>*</code>: Should be updated with real-time data.</p>
<hr />
<h1 id="locations">Locations</h1>
<h2 id="locations-cell-ids-and-hash-codes">Locations, cell IDs and hash codes</h2>
<blockquote>
<p>What are the cell IDs in the <code>locations.json</code> endpoint?</p>
</blockquote>
<p>The way map regions are specified takes a bit of getting used to but it's worth it, as it allows caching results on the client, while frequently calling this endpoint to make sure the local data is update without requiring a lot of data overhead (and having most of the logic on the server). This works by splitting the world into individual cells which get an identifier which represents the south-west corner as <code>$(lat*cellsPerDegree)#$(lng*cellsPerDegree)</code>.</p>
<blockquote>
<p>Got it. And <code>cellIDHashCodes</code>?</p>
</blockquote>
<p>You typically call <code>locations.json</code> with the cell IDs, but if you want to cache this information on the client, then, later, you'll want to use <code>cellIDHashCodes</code> as the input. Here you, again, send the cell IDs but this time with the hash codes for each cell from the previous output. You'll then only get content for cells if their content changed.</p>
<hr />
<h3 id="example">Example</h3>
<p>Let's say, you want the minor stops around CBD of Sydney, Australia. You'll first request:</p>
<pre><code>{
  "region": "AU_NSW_Sydney",
  "level": 2,
  "cellIDs": [
    "-2540#11339",
    "-2540#11340",
    "-2540#11341",
    "-2541#11339",
    "-2541#11340",
    "-2541#11341",
    "-2542#11339",
    "-2542#11340",
    "-2542#11341"
  ]
}
</code></pre>
<p>You'll then get results:</p>
<pre><code>{
  "groups": [
    {
      "hashCode": 690784261,
      "key": "-2540#11339",
      "stops": [...]
    },
    {
      "hashCode": -1940969928,
      "key": "-2540#11340",
      "stops": [...]
    }
  ]
}
</code></pre>
<p>You can then cache these and later on request again for changes by supplying <code>cellIDHashCodes</code>:</p>
<pre><code>{
  "region": "AU_NSW_Sydney",
  "level": 2,
  "cellIDHashCodes": {
    "-2540#11339": 690784261,
    "-2540#11340": -1940969928
  }
}
</code></pre>
<p>Which will then only return any groups that have changed. If nothing changed, you'll just get back:</p>
<pre><code>{
  "groups": []
}
</code></pre>
<hr />
<p><strong>Note</strong>: You can do the same thing for the major stations of level 1. In that case the cell ID is typically the code of the region itself:</p>
<pre><code>{
  "region": "AU_NSW_Sydney",
  "cellIDHashCodes": {
    "AU_NSW_Sydney": 1096794422
  }
}
</code></pre></div>
		</div>
		<div class="navbar-bottom" role="navigation">
	<div class="container -layout-6-6">
			    <div class="col">
			        <a rel="next" href=".." class="prev">
			            <div class="label">
			            	Previous
			            </div>
			            <div class="title">
			            	Getting Started
			            </div>
			        </a>
			    </div>
			    <div class="col">
			        <a rel="prev" href="../extensions/" class="next">
			            <div class="label">
			            	Next
			            </div>
			            <div class="title">
			            	Extensions
			            </div>
			        </a>
			    </div>
	</div>
</div>
		<footer class="footer">
	<div class="logo">
		<img src="../img/tripgo-api-logo-mono.svg" alt="TripGo Logo" width="134" height="34">
	</div>
	<ul class="menu">
		<li>
			<a href="https://www.skedgo.com">SkedGo website</a>
		</li>
		<li>
			<a href="https://skedgo.com/en/tripgo-api/pricing/">Pricing</a>
		</li>
		<li>
			<a href="https://github.com/skedgo/tripgo-api/issues">Report issue</a>
		</li>
		<li>
			<a href="mailto:support@skedgo.com">Email support</a>
		</li>
		<li>
			<a href="http://slack.tripgo.com/">Slack community</a>
		</li>
	</ul>
</footer>
		<script>var base_url = '..';</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
		<script src="../js/app.min.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>